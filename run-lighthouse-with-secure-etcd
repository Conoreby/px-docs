---
layout: page
title: "Run Lighthouse"
keywords: portworx, px-developer, px-enterprise, install, configure, container, storage, lighthouse
sidebar: home_sidebar
---

This guide shows you how you can run [PX-Enterprise Console](http://lighthouse.portworx.com/) locally with secure etcd.

Lighthouse supports etcd2 auth features
1. You can use SSL for connecting to etcd : Use a CA file and/or a Certificate-Key pair
2. You can enable auth in etcd and provide username and password as well. This user should have read/write access to etcd
3. Provide all above options as commandline arguments to docker run command for lighthouse

#### Step #1: Install kvdb with a CA file and/or a Certificate-Key pair

* You can have CA file and/or a Certificate-Key pair for you etcd2 server. There is an example document at [Etcd with Encryption and Authentication] (
https://medium.com/@gargar454/coreos-etcd-and-fleet-with-encryption-and-authentication-27ffefd0785c#.w24dog98z)
* Lighthouse requires that you pass the certs into the container using persistant storage and you map them to '/etc/pwx' path using -v option

#### Step #2: Enable auth in etcd

* You can enable authentication in etcd, using this [guide] (https://coreos.com/etcd/docs/latest/authentication.html)

#### Step #3: Run the PX-Lighthouse container

For **ETCD2**, start the container with the following run command:
```
Sudo docker run -d -p 80:80 -v /etc/ssl:/etc/pwx --restart always  \
-e PWX_KVDB_CA_PATH="/etc/ssl/ca.crt"                              \
-e PWX_KVDB_USER_CERT_KEY_PATH="/etc/ssl/key.key"                  \
-e PWX_KVDB_USER_CERT_PATH="/etc/ssl/key.crt"                      \
-e PWX_KVDB_USER_PWD="etcd2username:password"                      \
-e PWX_KVDB_AUTH="true"                                            \
--name px-lighthouse portworx/px-lighthouse                        \
-d http://admin:password1@${LOCAL_IP}:8086                         \
-k etcd:https://${LOCAL_IP}:2379 
```

Runtime command options

```
-d http://{ADMIN_USER}:{ADMIN_PASSWORD}@{IP_Address}:8086
   > Connection string of your influx db
-k {etcd/consul}:http://{IP_Address}:{Port_NO}
   > Connection string of your kbdb.
   > Note: Specify port 2379 for etcd 
```

The following environment variables are available for px-lighthouse:

```
PWX_KVDB                    (URL:PORT without username:password)
PWX_KVDB_AUTH               (true or false, to enable or disable auth)
PWX_KVDB_CA_PATH            (e.g. **/etc/pwd/ca.pem**)
PWX_KVDB_USER_CERT_KEY_PATH (e.g. **/etc/pwd/host.key**)
PWX_KVDB_USER_CERT_PATH     (e.g. **/etc/pwx/host.pem**)
PWX_KVDB_USER_PWD           (e.g. **username:password**)
PWX_INFLUXDB                (URL:PORT without username:password string)
PWX_INFLUXUSR               (influx username)
PWX_INFLUXPW                (influx password)
```
